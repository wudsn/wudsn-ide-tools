<html>
<head>
	<link rel='stylesheet' type='text/css' href='pasdoc.css'>
	<title>unit b_pmg - reference</title>
</head>
<body>

<!--********************* HEADER **************************-->

<h1>unit b_pmg</h1>
<h3>Player and missile graphics library.</h3>
<p>author: bocianu <a href='mailto:bocianu@gmail.com'>bocianu@gmail.com</a></p>
<br><p>Set of useful constants, registers and methods to fiddle with hardware Atari 8-bit sprites (and missiles). <br> This library is a part of 'blibs' - set of custom Mad-Pascal libraries. <br> <a href='https://gitlab.com/bocianu/blibs'>https://gitlab.com/bocianu/blibs</a></p>

<!--********************* CONSTANTS **************************-->

<h2>Constants:</h2>
<table class='consts'>
<tr><th>name:</th><th>value:</th><th>description:</th></tr>

<tr><td class='tname'>PMG_vdelay_m0</td><td class='tvalue'>%00000001</td><td class='tdesc'>Vertical delay patterns</td></tr>
<tr><td class='tname'>PMG_vdelay_m1</td><td class='tvalue'>%00000010</td><td class='tdesc'></td></tr>
<tr><td class='tname'>PMG_vdelay_m2</td><td class='tvalue'>%00000100</td><td class='tdesc'></td></tr>
<tr><td class='tname'>PMG_vdelay_m3</td><td class='tvalue'>%00001000</td><td class='tdesc'></td></tr>
<tr><td class='tname'>PMG_vdelay_p0</td><td class='tvalue'>%00010000</td><td class='tdesc'></td></tr>
<tr><td class='tname'>PMG_vdelay_p1</td><td class='tvalue'>%00100000</td><td class='tdesc'></td></tr>
<tr><td class='tname'>PMG_vdelay_p2</td><td class='tvalue'>%01000000</td><td class='tdesc'></td></tr>
<tr><td class='tname'>PMG_vdelay_p3</td><td class='tvalue'>%10000000</td><td class='tdesc'></td></tr>
<tr><td class='tname'>PMG_SIZE_NORMAL</td><td class='tvalue'>%00000000</td><td class='tdesc'>player widths</td></tr>
<tr><td class='tname'>PMG_SIZE_x2</td><td class='tvalue'>%00000001</td><td class='tdesc'></td></tr>
<tr><td class='tname'>PMG_SIZE_x4</td><td class='tvalue'>%00000011</td><td class='tdesc'></td></tr>
<tr><td class='tname'>PMG_MSIZE0_x2</td><td class='tvalue'>%00000001</td><td class='tdesc'>missile widths</td></tr>
<tr><td class='tname'>PMG_MSIZE0_x4</td><td class='tvalue'>%00000011</td><td class='tdesc'></td></tr>
<tr><td class='tname'>PMG_MSIZE1_x2</td><td class='tvalue'>%00000100</td><td class='tdesc'></td></tr>
<tr><td class='tname'>PMG_MSIZE1_x4</td><td class='tvalue'>%00001100</td><td class='tdesc'></td></tr>
<tr><td class='tname'>PMG_MSIZE2_x2</td><td class='tvalue'>%00010000</td><td class='tdesc'></td></tr>
<tr><td class='tname'>PMG_MSIZE2_x4</td><td class='tvalue'>%00110000</td><td class='tdesc'></td></tr>
<tr><td class='tname'>PMG_MSIZE3_x2</td><td class='tvalue'>%01000000</td><td class='tdesc'></td></tr>
<tr><td class='tname'>PMG_MSIZE4_x4</td><td class='tvalue'>%11000000</td><td class='tdesc'></td></tr>
<tr><td class='tname'>PMG_gractl_missiles</td><td class='tvalue'>%00000001</td><td class='tdesc'>Turns on missiles</td></tr>
<tr><td class='tname'>PMG_gractl_players</td><td class='tvalue'>%00000010</td><td class='tdesc'>Turns on players</td></tr>
<tr><td class='tname'>PMG_gractl_latch</td><td class='tvalue'>%00000100</td><td class='tdesc'></td></tr>
<tr><td class='tname'>PMG_gractl_default</td><td class='tvalue'>PMG_gractl_missiles or PMG_gractl_players</td><td class='tdesc'></td></tr>
<tr><td class='tname'>PMG_sdmctl_DMA_missile</td><td class='tvalue'>%00000100</td><td class='tdesc'>Enable missiles DMA</td></tr>
<tr><td class='tname'>PMG_sdmctl_DMA_player</td><td class='tvalue'>%00001000</td><td class='tdesc'>Enable players DMA</td></tr>
<tr><td class='tname'>PMG_sdmctl_DMA_both</td><td class='tvalue'>%00001100</td><td class='tdesc'></td></tr>
<tr><td class='tname'>PMG_sdmctl_oneline</td><td class='tvalue'>%00010000</td><td class='tdesc'>Set one line resolution</td></tr>
<tr><td class='tname'>PMG_sdmctl_screen_disabled</td><td class='tvalue'>0</td><td class='tdesc'></td></tr>
<tr><td class='tname'>PMG_sdmctl_screen_narrow</td><td class='tvalue'>1</td><td class='tdesc'></td></tr>
<tr><td class='tname'>PMG_sdmctl_screen_normal</td><td class='tvalue'>%10</td><td class='tdesc'></td></tr>
<tr><td class='tname'>PMG_sdmctl_screen_wide</td><td class='tvalue'>%11</td><td class='tdesc'></td></tr>
<tr><td class='tname'>PMG_sdmctl_default</td><td class='tvalue'>PMG_sdmctl_DMA_both or PMG_sdmctl_screen_normal</td><td class='tdesc'></td></tr>
<tr><td class='tname'>PMG_collision_player_to_p0</td><td class='tvalue'>1</td><td class='tdesc'>Player overlaps Player0</td></tr>
<tr><td class='tname'>PMG_collision_player_to_p1</td><td class='tvalue'>2</td><td class='tdesc'>Player overlaps Player1</td></tr>
<tr><td class='tname'>PMG_collision_player_to_p2</td><td class='tvalue'>4</td><td class='tdesc'>Player overlaps Player2</td></tr>
<tr><td class='tname'>PMG_collision_player_to_p3</td><td class='tvalue'>8</td><td class='tdesc'>Player overlaps Player3</td></tr>
<tr><td class='tname'>PMG_5player</td><td class='tvalue'>%00010000</td><td class='tdesc'>Turn on 5th player</td></tr>
<tr><td class='tname'>PMG_overlap</td><td class='tvalue'>%00100000</td><td class='tdesc'>Additional color on players overlap</td></tr>

</table>

<!--********************* TYPES **************************-->





<!--********************* ABSOLUTE VARIABLES **************************-->

<h2>Register Variables:</h2>
<table class='registers'>
<tr><th>name:</th><th>address:</th><th>type:</th><th>description:</th></tr>

<tr><td class='tname'>PMG_sdmctl</td><td class='taddress'>$D400</td><td class='ttype'>byte</td><td class='tdesc'>Direct Memory Access (DMA) enable flag.</td></tr>
<tr><td class='tname'>PMG_sdmctl_S</td><td class='taddress'>$22F</td><td class='ttype'>byte</td><td class='tdesc'>Direct Memory Access (DMA) enable flag - shadow register.</td></tr>
<tr><td class='tname'>PMG_gprior</td><td class='taddress'>$D01B</td><td class='ttype'>byte</td><td class='tdesc'>Priority selection register.</td></tr>
<tr><td class='tname'>PMG_gprior_S</td><td class='taddress'>$26F</td><td class='ttype'>byte</td><td class='tdesc'>Priority selection register - shadow register.</td></tr>
<tr><td class='tname'>PMG_pcolr0</td><td class='taddress'>$D012</td><td class='ttype'>byte</td><td class='tdesc'>Player colors.</td></tr>
<tr><td class='tname'>PMG_pcolr1</td><td class='taddress'>$D013</td><td class='ttype'>byte</td><td class='tdesc'></td></tr>
<tr><td class='tname'>PMG_pcolr2</td><td class='taddress'>$D014</td><td class='ttype'>byte</td><td class='tdesc'></td></tr>
<tr><td class='tname'>PMG_pcolr3</td><td class='taddress'>$D015</td><td class='ttype'>byte</td><td class='tdesc'></td></tr>
<tr><td class='tname'>PMG_pcolr0_S</td><td class='taddress'>$2C0</td><td class='ttype'>byte</td><td class='tdesc'>Player colors - shadow registers.</td></tr>
<tr><td class='tname'>PMG_pcolr1_S</td><td class='taddress'>$2C1</td><td class='ttype'>byte</td><td class='tdesc'></td></tr>
<tr><td class='tname'>PMG_pcolr2_S</td><td class='taddress'>$2C2</td><td class='ttype'>byte</td><td class='tdesc'></td></tr>
<tr><td class='tname'>PMG_pcolr3_S</td><td class='taddress'>$2C3</td><td class='ttype'>byte</td><td class='tdesc'></td></tr>
<tr><td class='tname'>PMG_hpos0</td><td class='taddress'>$D000</td><td class='ttype'>byte</td><td class='tdesc'>Horizontal positions of players.</td></tr>
<tr><td class='tname'>PMG_hpos1</td><td class='taddress'>$D001</td><td class='ttype'>byte</td><td class='tdesc'></td></tr>
<tr><td class='tname'>PMG_hpos2</td><td class='taddress'>$D002</td><td class='ttype'>byte</td><td class='tdesc'></td></tr>
<tr><td class='tname'>PMG_hpos3</td><td class='taddress'>$D003</td><td class='ttype'>byte</td><td class='tdesc'></td></tr>
<tr><td class='tname'>PMG_hposm0</td><td class='taddress'>$D004</td><td class='ttype'>byte</td><td class='tdesc'>Horizontal positions of missiles.</td></tr>
<tr><td class='tname'>PMG_hposm1</td><td class='taddress'>$D005</td><td class='ttype'>byte</td><td class='tdesc'></td></tr>
<tr><td class='tname'>PMG_hposm2</td><td class='taddress'>$D006</td><td class='ttype'>byte</td><td class='tdesc'></td></tr>
<tr><td class='tname'>PMG_hposm3</td><td class='taddress'>$D007</td><td class='ttype'>byte</td><td class='tdesc'></td></tr>
<tr><td class='tname'>PMG_sizep0</td><td class='taddress'>$D008</td><td class='ttype'>byte</td><td class='tdesc'>Size of players.</td></tr>
<tr><td class='tname'>PMG_sizep1</td><td class='taddress'>$D009</td><td class='ttype'>byte</td><td class='tdesc'></td></tr>
<tr><td class='tname'>PMG_sizep2</td><td class='taddress'>$D00A</td><td class='ttype'>byte</td><td class='tdesc'></td></tr>
<tr><td class='tname'>PMG_sizep3</td><td class='taddress'>$D00B</td><td class='ttype'>byte</td><td class='tdesc'></td></tr>
<tr><td class='tname'>PMG_sizem</td><td class='taddress'>$D00C</td><td class='ttype'>byte</td><td class='tdesc'>Size of missiles</td></tr>
<tr><td class='tname'>PMG_grafp0</td><td class='taddress'>$D00D</td><td class='ttype'>byte</td><td class='tdesc'>Players graphics shapes (non DMA).</td></tr>
<tr><td class='tname'>PMG_grafp1</td><td class='taddress'>$D00E</td><td class='ttype'>byte</td><td class='tdesc'></td></tr>
<tr><td class='tname'>PMG_grafp2</td><td class='taddress'>$D00F</td><td class='ttype'>byte</td><td class='tdesc'></td></tr>
<tr><td class='tname'>PMG_grafp3</td><td class='taddress'>$D010</td><td class='ttype'>byte</td><td class='tdesc'></td></tr>
<tr><td class='tname'>PMG_grafm</td><td class='taddress'>$D011</td><td class='ttype'>byte</td><td class='tdesc'>Missile graphics shapes (non DMA).</td></tr>
<tr><td class='tname'>PMG_p0pl</td><td class='taddress'>$D00C</td><td class='ttype'>byte</td><td class='tdesc'>Player to player collison statuses.</td></tr>
<tr><td class='tname'>PMG_p1pl</td><td class='taddress'>$D00D</td><td class='ttype'>byte</td><td class='tdesc'></td></tr>
<tr><td class='tname'>PMG_p2pl</td><td class='taddress'>$D00E</td><td class='ttype'>byte</td><td class='tdesc'></td></tr>
<tr><td class='tname'>PMG_p3pl</td><td class='taddress'>$D00F</td><td class='ttype'>byte</td><td class='tdesc'></td></tr>
<tr><td class='tname'>PMG_vdelay</td><td class='taddress'>$D01C</td><td class='ttype'>byte</td><td class='tdesc'>Vertical delay register.</td></tr>
<tr><td class='tname'>PMG_gractl</td><td class='taddress'>$D01D</td><td class='ttype'>byte</td><td class='tdesc'>Graphics Control register. Controls receipt of Player/Missile DMA data</td></tr>
<tr><td class='tname'>PMG_hitclr</td><td class='taddress'>$D01E</td><td class='ttype'>byte</td><td class='tdesc'>Clear Collisions</td></tr>
<tr><td class='tname'>PMG_pmbase</td><td class='taddress'>$D407</td><td class='ttype'>byte</td><td class='tdesc'>Upper byte of the player/missile base address</td></tr>

</table>

<!--********************* GLOBAL VARIABLES **************************-->

<h2>Global Variables:</h2>
<table class='variables'>
<tr><th>name:</th><th>type:</th><th>description:</th></tr>

<tr><td class='tname'>PMG_oneline</td><td class='ttype'>boolean</td><td class='tdesc'>contains true if current mode uses single line resolution.
contains false for double line resolution</td></tr>
<tr><td class='tname'>PMG_base</td><td class='ttype'>pointer</td><td class='tdesc'>contains base address</td></tr>
<tr><td class='tname'>PMG_size</td><td class='ttype'>word</td><td class='tdesc'>contains memory size used by PMG</td></tr>

</table>

<!--********************* INTERFACE **************************-->

<h2>Interface:</h2>
<table class='interface'>
<tr><th>name:</th><th>description:</th></tr>

<tr><td class='tname fname'>PMG_Init</td><td class='tdesc'><h4>procedure PMG_Init(base: byte); overload;</h4><br>
	Initializes PMG engine with default settings.<br><ul><h5>parameters:</h5><li>base - upper byte of PMG memory address</li></ul></td></tr>
<tr><td class='tname fname'>PMG_Init</td><td class='tdesc'><h4>procedure PMG_Init(base, sdmctl: byte); overload;</h4><br>
	Initializes PMG engine with custom sdmctl value.<br><ul><h5>parameters:</h5><li>base - upper byte of PMG memory address</li><li>sdmctl - SDMCTL register initial value</li></ul></td></tr>
<tr><td class='tname fname'>PMG_Init</td><td class='tdesc'><h4>procedure PMG_Init(base, sdmctl, gractl: byte); overload;</h4><br>
	Initializes PMG engine with custom sdmctl and gractl values.<br><ul><h5>parameters:</h5><li>base - upper byte of PMG memory address</li><li>sdmctl - SDMCTL register initial value</li><li>gractl - GRACTL register initial value</li></ul></td></tr>
<tr><td class='tname fname'>PMG_Clear</td><td class='tdesc'><h4>procedure PMG_Clear;</h4><br>
	Clears memory of sprites and missiles filling it with zeroes.<br><ul></ul></td></tr>
<tr><td class='tname fname'>PMG_Disable</td><td class='tdesc'><h4>procedure PMG_Disable;</h4><br>
	Turns off PMG<br><ul></ul></td></tr>

</table>

<!--********************* FOOTER **************************-->

<br>
<div class='footer'>This documentation was generated using <a href='https://gitlab.com/bocianu/pasdoc' target='_blank'>PasDoc</a>.</div>
</body>
</html>
